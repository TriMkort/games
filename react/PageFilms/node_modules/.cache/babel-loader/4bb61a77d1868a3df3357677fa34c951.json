{"ast":null,"code":"var _jsxFileName = \"c:\\\\xampp\\\\htdocs\\\\curso react\\\\REACT\\\\react\\\\06-proyecto1\\\\src\\\\componets\\\\Listado.js\";\nimport React, { useEffect, useCallback, useState } from 'react';\nimport Editar from './Editar';\nconst Listado = ({\n  listadoState,\n  setListadoState\n}) => {\n  // const [listadoState, setListadoState] = useState([]);\n  const [editar = false, setEditar] = useState(0);\n  const conseguirPeliculas = useCallback(() => {\n    let peliculas = JSON.parse(localStorage.getItem(\"pelis\") || \"[]\");\n    setListadoState(peliculas);\n    return peliculas;\n  }, [setListadoState]);\n  useEffect(() => {\n    console.log(\"Componente del listado cargado\");\n    conseguirPeliculas();\n  }, [conseguirPeliculas]);\n  const borrarPeli = id => {\n    //Conseguir peliculas almacenasdas\n    let peli_almacenadas = conseguirPeliculas();\n    //Filtar esas peliculas para que elimine del array la que no quiero\n    let peli_nuevo_Array = peli_almacenadas.filter(peli => peli.id !== parseInt(id));\n\n    //Actualizar el estado del listado\n    setListadoState(peli_nuevo_Array);\n    //Actualizar los dtos en el localstorage\n    localStorage.setItem(\"pelis\", JSON.stringify(peli_nuevo_Array));\n    //Actualizar el listado\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(React.Fragment, null, listadoState != null ? listadoState.map(peli => {\n    return /*#__PURE__*/React.createElement(\"article\", {\n      className: \"peli-item\",\n      key: peli.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      className: \"title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 33\n      }\n    }, peli.titulo), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"description\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 33\n      }\n    }, peli.descripcion), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"edit\",\n      onClick: () => {\n        setEditar(peli.id);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 33\n      }\n    }, \"Editar\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"delete\",\n      onClick: () => borrarPeli(peli.id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 33\n      }\n    }, \"Borrar\"), editar === peli.id && /*#__PURE__*/React.createElement(Editar, {\n      peli: peli,\n      conseguirPeliculas: conseguirPeliculas,\n      setEditar: setEditar,\n      setListadoState: setListadoState,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 37\n      }\n    }));\n  }) : /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 22\n    }\n  }, \"No hay peliculas para mostrar\")));\n};\nexport default Listado;","map":{"version":3,"names":["React","useEffect","useCallback","useState","Editar","Listado","listadoState","setListadoState","editar","setEditar","conseguirPeliculas","peliculas","JSON","parse","localStorage","getItem","console","log","borrarPeli","id","peli_almacenadas","peli_nuevo_Array","filter","peli","parseInt","setItem","stringify","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","Fragment","map","key","titulo","descripcion","onClick"],"sources":["c:/xampp/htdocs/curso react/REACT/react/06-proyecto1/src/componets/Listado.js"],"sourcesContent":["import React, { useEffect, useCallback, useState} from 'react'\r\nimport Editar from './Editar';\r\n\r\nconst Listado = ({listadoState, setListadoState}) => {\r\n\r\n    // const [listadoState, setListadoState] = useState([]);\r\n    const [editar = false, setEditar] = useState(0);\r\n\r\n    const conseguirPeliculas = useCallback(() => {\r\n        let peliculas = JSON.parse(localStorage.getItem(\"pelis\") || \"[]\");\r\n        setListadoState(peliculas);\r\n        return peliculas;\r\n    },[setListadoState]);   \r\n\r\n    useEffect(() => {\r\n        console.log(\"Componente del listado cargado\");\r\n        conseguirPeliculas();\r\n    }, [conseguirPeliculas]);\r\n\r\n\r\n    \r\n    const borrarPeli = (id) =>{\r\n       //Conseguir peliculas almacenasdas\r\n       let peli_almacenadas = conseguirPeliculas();\r\n       //Filtar esas peliculas para que elimine del array la que no quiero\r\n        let peli_nuevo_Array = peli_almacenadas.filter(peli => peli.id !== parseInt(id));\r\n        \r\n       //Actualizar el estado del listado\r\n       setListadoState(peli_nuevo_Array);\r\n       //Actualizar los dtos en el localstorage\r\n       localStorage.setItem(\"pelis\", JSON.stringify(peli_nuevo_Array));\r\n       //Actualizar el listado\r\n    };\r\n    return (\r\n        <div className='content'>\r\n            <>\r\n                {listadoState != null ? \r\n                        listadoState.map (peli => {\r\n                        return (\r\n                            <article className=\"peli-item\" key={peli.id}>\r\n                                <h3 className=\"title\">{peli.titulo}</h3>\r\n                                <p className=\"description\">{peli.descripcion}</p>\r\n                                <button className=\"edit\" onClick={() => {setEditar (peli.id)}}>Editar</button>\r\n                                <button className=\"delete\" onClick={() => borrarPeli(peli.id)}>Borrar</button>\r\n\r\n                                {/* Aparece formulario de editar */}\r\n                                {editar === peli.id && ( \r\n                                    <Editar peli={peli}\r\n                                            conseguirPeliculas={conseguirPeliculas}\r\n                                            setEditar={setEditar}\r\n                                            setListadoState={setListadoState}/>\r\n                                )}\r\n                            </article>\r\n                        );\r\n                    })\r\n                    :<h2>No hay peliculas para mostrar</h2>\r\n                } \r\n            </>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Listado\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}